<!DOCTYPE html>
<html lang="en">
  <head>
    <title>kriging.js</title>
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Imprima">  
    <script src="http://rawgithub.com/oeo4b/kriging.js/master/kriging.js" type="text/javascript"></script>
    <style type="text/css">
      * {
        margin: 0px;
        padding: 0px;
      }
      body {
        font-family: 'Imprima';
      }
      a {
        color: black; 
      }
      h2 {
        padding-left: 20px;
      }
      h3 {
        padding-left: 40px;
        color: #2C3539;
      }
      p {
        padding-left: 60px;
        padding-right: 40px;
        padding-top: 10px;
        padding-bottom: 10px;
      }
      pre {
        padding-left: 80px;
        padding-right: 40px;
        padding-top: 10px;
        padding-bottom: 10px;
        color: grey;
      }
      .logo {
        font-size: 36px;
      }
      #header {
        padding: 10px;
      }
      #header ul {
        list-style-type: none;
      }
      #header ul li {
        display: inline;
        padding-left: 10px;
        padding-right: 10px;
      } 
      #map {
        background-color: red;
      }
    </style>
  </head>
  <body>
    <div id="header">
      <ul>
	<li>
	  <b><a class="logo">kriging.js</a></b>
	</li>
	<li>
	  <a href="http://rawgithub.com/oeo4b/kriging.js/master/kriging.js" download="kriging.js">Download</a>
	</li>
	<li>
	  <a href="#what">What is this?</a>
	</li>
	<li>
	  <a href="#examples">Examples</a>
	</li>
	<li>
	  <a href="#documentation">Documentation</a>
	</li>
      </ul>
    </div>
    <canvas id="map">
    </canvas>
    <script type="text/javascript">
      // Init canvas dimensions
      var canvas = document.getElementById("map");
      var header = document.getElementById("header");
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight - header.clientHeight;

      // Set up event handlers
      
    </script>
    <div id="what"></div>
      <h2>.What is this?</h2>
      <p><strong>kriging.js</strong> is a Javascript library for mapping and predicting spatial data using the <a href="http://en.wikipedia.org/wiki/Kriging" target="_newtab">kriging algorithm</a>. This library allows one to model spatial data and generate maps by predicting new values within the range of the given data.</p>
      <p>The easiest way to get started is to <a href="http://rawgithub.com/oeo4b/kriging.js/master/kriging.js" download="kriging.js">download</a> the Javascript library (or link directly to krigingjs.com/kriging.js) and attach it to your html code. Then, to train a <a href="#documentation">model</a> with coordinates (<strong>x</strong>, <strong>y</strong>) and values <strong>t</strong> on <a href="#documentation">parameters</a> &sigma;<sup>2</sup> and &alpha;:</p>
      <pre>var model = "exponential";
var sigma2 = 0, alpha = 100;
var fitModel = kriging.train(t, x, y, model, 0, 100);</pre>
      <p>To predict points at a new point in space (<strong>x<sub>new</sub></strong>, <strong>y<sub>new</sub></strong>):</p>
      <pre>var tnew = kriging.predict(xnew, ynew, fitModel);</pre>
    <div id="examples"></div>
      <h2>.Creating Maps</h2>
      <p>

      </p>
    <div id="documentation"></div>
      <h2>.Documentation</h2>
      <ul>
	<li>
          <h3>Probability Model</h3>
          <p>The model used is a 2-dimensional gaussian process, <b>y</b>, with a prior on the parameters of the kernel function. One of a variety of different kernel functions (or variogram models) generate the Gram matrix <b>K</b>. The variance &sigma;<sup>2</sup> of the noise process is adjustable, providing a smoothing effect by increasing the uncertainty of the likelihood <b>t</b>.</p>
	  <pre><b>y</b>&nbsp;&nbsp; ~ N(<b>0</b>, <b>K</b>)
<b>t</b>|<b>y</b> ~ N(<b>t</b>|<b>y</b>, &sigma;<sup>2</sup><b>I</b>)</pre>
        </li>
	<li>
	  <h3>Variogram</h3>
	    <p>The various variogram models can be interpreted as kernel functions for 2-dimensional coordinates <strong>a</strong>, <strong>b</strong> and parameters nugget, range, sill and A. Reparameterized as a linear function, with w = [nugget, (sill-nugget)/range], this becomes:</p>
	    <pre>
Gaussian: k(<strong>a</strong>,<strong>b</strong>) = w[0] + w[1] * ( 1 - exp{ -( ||<strong>a</strong>-<strong>b</strong>|| / range )<sup>2</sup> / A } )
Exponential: k(<strong>a</strong>,<strong>b</strong>) = w[0] + w[1] * ( 1 - exp{ -( ||<strong>a</strong>-<strong>b</strong>|| / range ) / A } )
Spherical: k(<strong>a</strong>,<strong>b</strong>) = w[0] + w[1] * ( 1.5 * ( ||<strong>a</strong>-<strong>b</strong>|| / range ) - 0.5 * ( ||<strong>a</strong>-<strong>b</strong>|| / range )<sup>3</sup> )</pre>
	    <p>Bayesian regression is used to estimate the parameters with the prior:<p>
	    <pre><b>w</b> ~ N(w|<strong>0</strong>, Î±<strong>I</strong>)</pre>
	</li>
	<li>
	  <h3>Prior and noise process</h3>
	</li>
	<li>
	  <h3>Mapping methods</h3>
	</li>
      </ul>
      <p></p>
    <div id="footer">
      <small style="padding-left: 20px">Copyright 2011-2014. Released under <a href="http://opensource.org/licenses/MIT">The MIT License</a>.</small>
    </div>
  </body>
</html>
